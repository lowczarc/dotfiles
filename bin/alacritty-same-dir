#!/bin/bash

WINDOW_PID="$(swaymsg -t get_tree | jq -r '.. | select(.focused? == true) | .pid')"
SHELL_PID="$(pgrep -P "$WINDOW_PID")"

PID_PATH="$(readlink -f /proc/$SHELL_PID/cwd)"

if [ -d "$PID_PATH" ]; then
    alacritty --working-directory "$PID_PATH"
else
    alacritty
fi
